(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[679],{8681:function(e,t,a){"use strict";var l,n,s,r;a.d(t,{k$:function(){return n},y$:function(){return l}}),(s=l||(l={})).Heavy="HEAVY",s.Medium="MEDIUM",s.Light="LIGHT",(r=n||(n={})).Success="SUCCESS",r.Warning="WARNING",r.Error="ERROR"},2634:function(e,t,a){"use strict";a.d(t,{F:function(){return n}});var l=a(9895);let n=(0,l.fo)("Toast",{web:()=>a.e(56).then(a.bind(a,5056)).then(e=>new e.ToastWeb)})},9256:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/declarations",function(){return a(3773)}])},3773:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Home}});var l=a(5893),n=a(8583),s=a(5122),r=a(7294),i=a(3802),c=a(1855);function DeclarationCard(e){let{selected:t,declaration:a,...n}=e;return(0,l.jsxs)(c.Z,{className:"grid grid-cols-2 justify-between",selected:t,...n,children:[(0,l.jsx)("span",{className:"flex-1 font-bold text-left",children:a.name}),(0,l.jsxs)("span",{className:"text-right",children:["â‚¬",a.amount]}),(0,l.jsx)("span",{className:"flex-1 text-left",children:a.status}),(0,l.jsx)("span",{className:"text-right",children:a.date})]})}var o=a(3750);let d=null;function SearchSortBar(){let[e,t]=(0,n.KO)(s.Pp),[,a]=(0,n.KO)(s.G2);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("section",{className:"flex flex-row justify-between items-center gap-4",children:[(0,l.jsxs)("div",{className:"rounded-md flex flex-row py-2 px-4 relative items-center bg-gray-200 gap-4 w-full",children:[(0,l.jsx)(o.dVI,{className:"w-4 h-4 text-black/50"}),(0,l.jsx)("input",{type:"text",className:"w-full bg-transparent outline-none text-sm",placeholder:"Zoek op naam",onChange:e=>{let{name:t,value:l}=e.target;d&&clearTimeout(d),d=setTimeout(()=>a(l),250)}})]}),(0,l.jsx)(o.pHf,{className:"w-6 h-6 cursor-pointer",onClick:a=>{a.preventDefault(),t([...e].reverse())}})]})})}var u=a(9543),f=a(2081);function TabBar(e){let{tabs:t}=e,[a,r]=(0,n.KO)(s.iP);return(0,l.jsx)("nav",{className:"bg-black/5 p-[2px] flex flex-row gap-2 justify-between rounded-full",children:t.map((e,t)=>(0,l.jsxs)("button",{className:"flex-1 p-2 text-xs text-center cursor-pointer capitalize rounded-full relative",onClick:()=>r(t),children:[(0,l.jsx)("span",{className:"z-[2] relative ".concat(a===t?"font-bold":""),children:e}),a===t&&(0,l.jsx)(f.E.span,{layoutId:"bubble",className:"absolute inset-0 z-[1] bg-white rounded-full",transition:{type:"spring",bounce:.2,duration:.4}})]},"tab-".concat(t)))})}let x=["concept","afgekeurd","ingediend"];function DeclarationsHeader(){var e;let[,t]=(0,n.KO)(s.MX),[,a]=(0,n.KO)(s.hh),[r]=(0,n.KO)(s.Gd),i=null==r?void 0:null===(e=r.filter(e=>"warning"===e.type||"success"===e.type))||void 0===e?void 0:e.length;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Z,{}),(0,l.jsxs)("header",{className:"flex sticky top-0 flex-col bg-amber-400 p-4 py-8 pt-16 gap-4 z-10",children:[(0,l.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,l.jsx)("h1",{className:"text-white font-extrabold text-xl",children:"Uitgaven"}),(0,l.jsx)("div",{className:"flex flex-row gap-2 text-white",children:(0,l.jsxs)("button",{className:"bg-black/5 rounded-full p-2 z-20 relative",onClick:()=>t(e=>!e),children:[(0,l.jsx)(o.m32,{className:"w-5 h-5"}),i?(0,l.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center p-1",children:i}):null]})})]}),(0,l.jsx)(TabBar,{tabs:x})]})]})}var h=a(2373),p=a(1163),m=a(9872),g=a(9895),w=a(891);function NewDeclarationOverlay(e){let t=(0,p.useRouter)(),[a,i]=(0,n.KO)(s.hh),[c,d]=(0,n.KO)(s.KX),u=(0,r.useRef)(null),[x,h]=(0,r.useState)([]),handleCameraClick=async e=>{if(e.preventDefault(),i(!1),g.dV.isNativePlatform()){let{scannedImages:e}=await m._4.scanDocument({letUserAdjustCrop:!1,responseType:m.UN.Base64});console.log("scannedImages",e);let a=[];for(let t of e){let e=t.includes("iVBORw0KGgoAAAANSUhEUgAA"),l=t.includes("/9j/");l?a.push("data:image/jpeg;base64,".concat(t)):e&&a.push("data:image/png;base64,".concat(t))}d(a),await t.push("/declaration")}},handleFileImportClick=()=>{u.current.click()},handleFileInputChange=async e=>{let a=e.target.files;if(h(a),!a.length)return;console.log("selectedFiles",a);let l=[];for(let e of a)if(g.dV.isNativePlatform()){console.log("selectedFile",e);let t=await w.fy.readFile({path:e.path,ecoding:"base64"});l.push(t)}else{let t=new FileReader;await t.readAsDataURL(e),t.onloadend=()=>{let e=t.result;l.push(e)}}await d(l),i(!1),await t.push("/declaration")};return a?(0,l.jsxs)(f.E.div,{layout:!0,...e,className:"flex flex-row w-full gap-4",children:[(0,l.jsxs)(f.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex flex-col flex-1 bg-gray-100 hover:bg-gray-200 cursor-pointer p-8 items-center justify-center rounded-lg text-sm gap-2",onClick:handleFileImportClick,children:[(0,l.jsx)("input",{type:"file",accept:"image/*",multiple:!0,hidden:!0,onChange:async e=>await handleFileInputChange(e),ref:u}),(0,l.jsx)(o.eMk,{className:"w-8 h-8"}),"Importeer"]}),(0,l.jsxs)(f.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex flex-col flex-1 bg-gray-100 hover:bg-gray-200 cursor-pointer p-8 items-center justify-center rounded-lg gap-2 text-sm",onClick:g.dV.isNativePlatform()?handleCameraClick:handleFileImportClick,children:[(0,l.jsx)(o.BB5,{className:"w-8 h-8"}),"Neem foto"]})]}):null}var b=a(1872);function ConfirmationOverlay(e){let{title:t,...a}=e,[r]=(0,n.KO)(s.zr);return r?(0,l.jsx)("div",{...a,children:(0,l.jsxs)("div",{className:"flex flex-row gap-8 flex-1 p-8 items-center justify-center text-2xl font-extrabold",children:[(0,l.jsx)(b.sez,{className:"w-16 h-16"}),t]})}):null}function Overlay(){let[e,t]=(0,n.KO)(s.hh),[a,i]=(0,n.KO)(s.jd),[c]=(0,n.KO)(s.kD),[o,d]=(0,n.KO)(s.zr),closeOverlay=()=>{t(!1),i(!1),d(!1)},u={onClick:e=>e.stopPropagation()},autoCloseConfirmationOverlay=()=>{setTimeout(()=>{closeOverlay()},2e3)};return(0,r.useEffect)(()=>{a&&setTimeout(()=>{d(!0)},200)},[a]),(0,r.useEffect)(()=>{o&&autoCloseConfirmationOverlay()},[o]),(0,l.jsx)("div",{className:"\n                fixed inset-0 flex flex-col justify-end items-end z-50\n                ".concat(e||o?"opacity-100 z-[50] bg-black/50":"opacity-0 z-[-1] pointer-events-none bg-transparent","\n            "),onClick:closeOverlay,children:(0,l.jsxs)("div",{className:"bg-white p-4 rounded-t-2xl flex flex-row justify-center items-center gap-4 w-full",children:[(0,l.jsx)(NewDeclarationOverlay,{...u}),(0,l.jsx)(ConfirmationOverlay,{title:c,...u})]})})}var j=a(5138);a(8681);let v=(0,g.fo)("Haptics",{web:()=>a.e(776).then(a.bind(a,9776)).then(e=>new e.HapticsWeb)});var y=a(2634);let N=(0,g.fo)("Dialog",{web:()=>a.e(674).then(a.bind(a,5674)).then(e=>new e.DialogWeb)});var C=a(4709),O=a(9906);function Home(){let e=null,t=null,a=null,c=null,d=(0,p.useRouter)(),[u,f]=(0,n.KO)(s.Pp),[m]=(0,n.KO)(s.iP),[g]=(0,n.KO)(s.G2),[w,b]=(0,r.useState)([]),[,k]=(0,n.KO)(s.X5),[T]=(0,n.KO)(s.Gd),handleSelectDeclaration=e=>{w.includes(e)?b(w.filter(t=>t!==e)):b([...w,e])},handleClickDeclaration=e=>{d.push("/declaration?id="+e)},handleTapStart=async(l,n)=>{console.log("tap start"),console.log("tapStartX",a=n.point.x),e=new Date().getTime(),t&&clearTimeout(t),t=setTimeout(async()=>{await v.vibrate({duration:40}),handleSelectDeclaration(l.id)},500)},handleTap=async(l,n)=>{console.log("tap success"),c=l.point.x;let s=a-c>=100,r=new Date().getTime(),i=r-e;if(clearTimeout(t),e=null,i<500){if(null==w?void 0:w.length){w.includes(n)&&handleSelectDeclaration(n);return}s||handleClickDeclaration(n)}},handleTapCancel=(l,n)=>{console.log("tap cancel"),a=null,c=null,clearTimeout(t),e=null},handleDeleteSelectedDeclarations=async e=>{e.preventDefault();let t=[];for(let e of w)t.push((0,i.pi)(e));let a=await Promise.all(t);a?(await y.F.show({text:"Geselecteerde declaraties verwijderd."}),f(e=>e.filter(e=>!w.includes(e.id))),b([])):await y.F.show({text:"Error."})},handleSwipeLeft=async e=>{console.log("on swipe left"),await v.vibrate({duration:40});let{value:t}=await N.confirm({title:"Weet je het zeker?",message:"Weet je zeker dat je deze declaratie wilt verwijderen?"});return t&&await (0,i.pi)(e),t};return(0,r.useEffect)(()=>{(0,i.b7)().then(e=>{f(e)})},[]),(0,r.useEffect)(()=>{k(!1),b([]),t&&clearTimeout(t),e=null},[d.query,d.asPath,d.pathname,d.query]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(DeclarationsHeader,{}),(0,l.jsxs)(h.Z,{children:[(0,l.jsx)(SearchSortBar,{}),u.filter(e=>(null==e?void 0:e.status)===x[m]).filter(e=>{var t;return null==e?void 0:null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(g.toLowerCase())}).map((e,t)=>(0,l.jsx)(DeclarationCard,{declaration:e,selected:w.includes(e.id),deselectFn:()=>handleSelectDeclaration(e.id),onSwipeLeft:async()=>await handleSwipeLeft(e.id),allowSwipeLeft:!0,onTapStart:async(t,a)=>await handleTapStart(e,a),onTap:async(t,a)=>await handleTap(a,e.id),onTapCancel:handleTapCancel},"".concat(JSON.stringify(e),"-").concat(t))),(0,l.jsxs)("pre",{className:"text-xs mt-8 overflow-x-auto hidden",children:["notifications: ",JSON.stringify(T,null,2),(0,l.jsx)("br",{}),"currentTab: ",x[m],(0,l.jsx)("br",{}),"currentTabIndex: ",JSON.stringify(m,null,2),(0,l.jsx)("br",{}),"tabs: ",JSON.stringify(x,null,2),(0,l.jsx)("br",{}),"searchQuery: ",g,(0,l.jsx)("br",{}),"declarations: ",JSON.stringify(u,null,2)]})]}),(0,l.jsx)(O.Z,{}),(null==w?void 0:w.length)>0&&(0,l.jsxs)("div",{className:"fixed bottom-4 left-4 right-4 flex flex-row items-center justify-center gap-2",children:[(0,l.jsxs)(j.Z,{primary:!0,className:"flex-1 h-16 rounded-lg !bg-black shadow-lg text-sm",children:["Geselecteerde ",w.length," bonnen samenvoegen"]}),(0,l.jsx)(j.Z,{primary:!0,className:"h-16 rounded-lg !bg-red-600 shadow-lg text-sm",onClick:handleDeleteSelectedDeclarations,children:(0,l.jsx)(o.yvY,{className:"w-6 h-6 text-white"})})]}),(0,l.jsx)(C.Z,{}),(0,l.jsx)(Overlay,{})]})}},5138:function(e,t,a){"use strict";a.d(t,{Z:function(){return Button}});var l=a(5893),n=a(2081);function Button(e){let{primary:t=!1,secondary:a=!1,tertiary:s=!1,children:r,padding:i="large",fullWidth:c=!1,rounded:o="medium",className:d="",icon:u=null,...f}=e;return(0,l.jsxs)(n.E.button,{whileHover:{scale:1.01},whileTap:{scale:.99,backgroundColor:"rgba(0, 0, 0, 0.1)"},className:"\n            inline-flex flex-row justify-center items-center font-extrabold gap-2\n            ".concat("medium"===o?"rounded-md":"","\n            ").concat("large"===o?"rounded-lg":"","\n            ").concat("full"===o?"rounded-full":"","\n            ").concat(c?"w-full flex-1":"","\n            ").concat("large"===i?"p-8":"p-4 px-8","\n            ").concat(t?"bg-amber-400 text-white":"","\n            ").concat(t||s?"":"bg-gray-200 text-black","\n            ").concat(s?"bg-transparent text-black":"","\n            ").concat(d,"\n        "),...f,children:[u&&(0,l.jsx)("span",{className:"mr-auto",children:u}),(0,l.jsx)("span",{className:"flex-1 flex flex-row items-center justify-center text-center gap-2",children:r})]})}}},function(e){e.O(0,[13,16,874,617,401,994,826,530,646,774,888,179],function(){return e(e.s=9256)}),_N_E=e.O()}]);